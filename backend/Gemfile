source "https://rubygems.org"

# Main Rails framework (API, ActiveRecord, ActionPack)
gem "rails", "~> 8.1.1"

# PostgreSQL adapter for ActiveRecord
gem "pg", "~> 1.6"

# Production web server
gem "puma", "~> 7.1"

# Timezone data for Windows/JRuby
gem "tzinfo-data", platforms: %i[windows jruby]

# PostgreSQL-backed ActionCable, Rails.cache, background jobs
gem "solid_cable"          # ActionCable over PostgreSQL
gem "solid_cache"          # Rails.cache backed by PostgreSQL
gem "solid_queue"          # Background jobs backed by PostgreSQL

# Boot-time caching for faster startup
gem "bootsnap", "~> 1.19", require: false

# Simple deployment using containers
gem "kamal", "~> 2.9", require: false

# HTTP client
gem "httpx", "~> 1.6"

# HTTP caching + compression middleware
gem "thruster", "~> 0.1", require: false

# Image transformations (Active Storage)
gem "image_processing", "~> 1.14"

# Fast, optimized JSON parser/serializer
gem "oj", "~> 3.16"

# Explicit OpenSSL dependency (fix macOS SSL issues)
gem "openssl"

# Mission Control UI for jobs
gem "mission_control-jobs", "~> 1.1"

# Asset pipeline replacement for Rails 7+/8
gem "propshaft", "~> 1.3"

group :development do
  # Auto-add schema annotations to models
  gem "annotaterb", "~> 4.20"
end

group :development, :test do
  # Pretty-print Ruby objects
  gem "amazing_print", "~> 2.0", require: false

  # Security audit of dependency tree
  gem "bundler-audit", require: false

  # Security scanner for Rails apps
  gem "brakeman", require: false

  # Factories for tests
  gem "factory_bot_rails", "~> 6.5"

  # RuboCop integrations
  gem "rubocop-factory_bot", require: false
  gem "rubocop-rails-omakase", "~> 1.1", require: false
  gem "rubocop-rake", require: false
  gem "rubocop-rspec", require: false

  # Ruby debugger
  gem "debug",
      "~> 1.11",
      platforms: %i[mri windows],
      require:   "debug/prelude"

  # RSpec testing framework for Rails
  gem "rspec-rails", "~> 8.0"
end

group :test do
  gem "database_cleaner-active_record", "~> 2.2"
  gem "faker", "~> 3.5"
  gem "shoulda-matchers", "~> 7.0"
  gem "simplecov", "~> 0.22", require: false
end
