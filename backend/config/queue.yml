default: &base
  dispatchers:
    - polling_interval: 0.5
      batch_size: 100

  workers:
    # Character sync queues
    - queues: [character_sync_a, character_sync_b, character_sync_c, character_sync_d]
      threads: <%= ENV.fetch("CHARACTER_SYNC_THREADS", 4) %>
      processes: 1
      polling_interval: 0.25

    # PVP sync queues
    - queues: [pvp_sync_2v2, pvp_sync_3v3, pvp_sync_rbg, pvp_sync_shuffle]
      threads: <%= ENV.fetch("PVP_SYNC_THREADS", 4) %>
      processes: 1
      polling_interval: 0.5

    # Processing queue
    - queues: [pvp_processing]
      threads: <%= ENV.fetch("PVP_PROCESSING_THREADS", 4) %>
      processes: 1
      polling_interval: 0.25

    # Default queue
    - queues: "*"
      threads: <%= ENV.fetch("DEFAULT_THREADS", 4) %>
      processes: 1
      polling_interval: 0.5

development:
  <<: *base

production:
  <<: *base
