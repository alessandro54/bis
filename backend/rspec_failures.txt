
Pvp::SyncCharacterBatchJob
  enqueues individual SyncCharacterJob for each character for parallel processing (FAILED - 1)
  with a single character
    enqueues one SyncCharacterJob (FAILED - 2)

Pvp::SyncCharacterJob
  when the service succeeds
    delegates all work to the service (FAILED - 3)
  when the service returns an exception
    raises the same exception so the job is marked as failed
  when the service returns a non-exception error
    wraps the error in a StandardError

ServiceResult
  .success
    builds a successful result with payload
    defaults payload and context when not provided
  .failure
    builds a failure result with error key
    requires an error key
  #ok?
    returns true for success and false for failure
  #success?
    is an alias of #ok?
  #failure?
    is the negation of #ok?

Character
  validations
    is expected to validate that :name cannot be empty/falsy
    is expected to validate that :realm cannot be empty/falsy
    is expected to validate that :region cannot be empty/falsy
    is expected to validate that :name is case-sensitively unique within the scope of :realm and :region
    is expected to validate that :blizzard_id is case-insensitively unique within the scope of :region
    is expected to validate that :blizzard_id looks like an integer
  #display_name
    returns the character's name and realm

Item
  add some examples to (or delete) /Users/alessandro/Documents/Develop/personal/wow-bis/backend/spec/models/item_spec.rb (PENDING: Not yet implemented)

ItemTranslation
  add some examples to (or delete) /Users/alessandro/Documents/Develop/personal/wow-bis/backend/spec/models/item_translation_spec.rb (PENDING: Not yet implemented)

PvpLeaderboardEntryItem
  add some examples to (or delete) /Users/alessandro/Documents/Develop/personal/wow-bis/backend/spec/models/pvp_leaderboard_entry_item_spec.rb (PENDING: Not yet implemented)

PvpLeaderboardEntry
  add some examples to (or delete) /Users/alessandro/Documents/Develop/personal/wow-bis/backend/spec/models/pvp_leaderboard_entry_spec.rb (PENDING: Not yet implemented)

PvpLeaderboard
  add some examples to (or delete) /Users/alessandro/Documents/Develop/personal/wow-bis/backend/spec/models/pvp_leaderboard_spec.rb (PENDING: Not yet implemented)

PvpSeason
  add some examples to (or delete) /Users/alessandro/Documents/Develop/personal/wow-bis/backend/spec/models/pvp_season_spec.rb (PENDING: Not yet implemented)

Translation
  add some examples to (or delete) /Users/alessandro/Documents/Develop/personal/wow-bis/backend/spec/models/translation_spec.rb (PENDING: Not yet implemented)

ApplicationService
  inherits from BaseService
  .call
    returns success result when business logic passes
    returns failure result when business logic fails

BaseService
  .call
    instantiates and calls #call, returning a ServiceResult
  #success
    builds a success ServiceResult
  #failure
    builds a failure ServiceResult

Blizzard::Api::BaseRequest
  #initialize
    uses Blizzard.client with the given region and locale
    uses Blizzard.client with default locale when none is provided
  #client
    returns the same client instance that Blizzard.client returns

Blizzard::Auth
  #initialize
    when client_id or client_secret is missing
      raises an ArgumentError (FAILED - 4)
  #access_token
    when there is a valid cached token
      returns the cached token and does not call HTTPX
    when there is no cached token
      performs the OAuth request and caches the token
    when cached token is expired
      ignores expired token and fetches a new one
    when the HTTP response is not success
      raises Blizzard::Auth::Error
    when the response does not contain access_token
      raises Blizzard::Auth::Error

Blizzard::Client
  #initialize
    sets region, locale and auth for valid values
    raises an error for unsupported region
    raises an error for invalid locale for a given region
  #get
    builds the correct URL, query params and headers, and parses a successful JSON response
    raises Blizzard::Client::Error when status is not 200
    raises Blizzard::Client::Error when response body is invalid JSON
  namespace helpers
    returns correct profile namespace
    returns correct dynamic namespace
    returns correct static namespace

Pvp::Characters::SyncCharacterService
  #call
    when character does not exist
      returns a success result with not_found context
    when a reusable snapshot exists
      reuses the snapshot for the latest entries
      does not call the Blizzard APIs
      does not enqueue processing jobs
    when new data must be fetched
      updates all latest entries with fresh raw data
      enqueues processing jobs for each entry (FAILED - 5)
      assigns processing jobs to deterministic queues (FAILED - 6)

Pvp::Entries::ProcessEntryService
  #call
    when entry is nil
      returns a failure with 'Entry not found'
    when equipment processing fails
      returns the equipment failure result and does not call specialization service
    when equipment processing succeeds but specialization fails
      returns the specialization failure result
    when both equipment and specialization succeed
      returns a success with the entry as payload
    when an unexpected error is raised
      wraps the exception in a failure ServiceResult

Pvp::Entries::ProcessEquipmentService
  #call
    when equipment is already processed
      returns success and does not call the Blizzard equipment service
    when raw_equipment is missing equipped_items
      returns a failure with a descriptive error
    when raw_equipment is nil
      returns a failure with a descriptive error
    when everything goes well
      calls the Blizzard equipment upsert service with the correct arguments
      updates the entry with processed equipment and tier set info
      rebuilds the associated pvp_leaderboard_entry_items
      when the upsert service provides nil item level and tier set data
        still updates processed_at and raw_equipment but leaves optional fields nil
    when an error occurs while rebuilding items
      returns a failure and rolls back changes

Pvp::Entries::ProcessSpecializationService
  when specialization is already processed
    returns success immediately
    does not instantiate the Blizzard specialization service
  when there is no specialization data
    returns a failure with a descriptive error
  when everything goes well
    updates the entry with specialization info and talents
    updates the character's class_slug (normalized) and class_id when class_slug is present (FAILED - 7)
    does not change character class fields if class_slug is blank
  when an unexpected error happens
    returns a failure with the exception as error

Pvp::Meta::ClassDistributionService
  #call
    ranks high-volume strong specs above low-volume strong specs
    only returns dps specs (role filter)

Pending: (Failures listed here are expected and do not affect your suite's status)

  1) Item add some examples to (or delete) /Users/alessandro/Documents/Develop/personal/wow-bis/backend/spec/models/item_spec.rb
     # Not yet implemented
     # ./spec/models/item_spec.rb:25

  2) ItemTranslation add some examples to (or delete) /Users/alessandro/Documents/Develop/personal/wow-bis/backend/spec/models/item_translation_spec.rb
     # Not yet implemented
     # ./spec/models/item_translation_spec.rb:25

  3) PvpLeaderboardEntryItem add some examples to (or delete) /Users/alessandro/Documents/Develop/personal/wow-bis/backend/spec/models/pvp_leaderboard_entry_item_spec.rb
     # Not yet implemented
     # ./spec/models/pvp_leaderboard_entry_item_spec.rb:30

  4) PvpLeaderboardEntry add some examples to (or delete) /Users/alessandro/Documents/Develop/personal/wow-bis/backend/spec/models/pvp_leaderboard_entry_spec.rb
     # Not yet implemented
     # ./spec/models/pvp_leaderboard_entry_spec.rb:48

  5) PvpLeaderboard add some examples to (or delete) /Users/alessandro/Documents/Develop/personal/wow-bis/backend/spec/models/pvp_leaderboard_spec.rb
     # Not yet implemented
     # ./spec/models/pvp_leaderboard_spec.rb:26

  6) PvpSeason add some examples to (or delete) /Users/alessandro/Documents/Develop/personal/wow-bis/backend/spec/models/pvp_season_spec.rb
     # Not yet implemented
     # ./spec/models/pvp_season_spec.rb:24

  7) Translation add some examples to (or delete) /Users/alessandro/Documents/Develop/personal/wow-bis/backend/spec/models/translation_spec.rb
     # Not yet implemented
     # ./spec/models/translation_spec.rb:26

Failures:

  1) Pvp::SyncCharacterBatchJob enqueues individual SyncCharacterJob for each character for parallel processing
     Failure/Error:
       expect { perform_job }
         .to have_enqueued_job(Pvp::SyncCharacterJob)
         .exactly(2).times

       expected to enqueue exactly 2 jobs, but enqueued 0
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-support-3.13.6/lib/rspec/support.rb:110:in 'block in <module:Support>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-support-3.13.6/lib/rspec/support.rb:119:in 'RSpec::Support.notify_failure'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/fail_with.rb:35:in 'RSpec::Expectations.fail_with'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:39:in 'RSpec::Expectations::ExpectationHelper.handle_failure'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:55:in 'block in RSpec::Expectations::PositiveExpectationHandler.handle_matcher'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:26:in 'RSpec::Expectations::ExpectationHelper.with_matcher'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:47:in 'RSpec::Expectations::PositiveExpectationHandler.handle_matcher'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/expectation_target.rb:65:in 'RSpec::Expectations::ExpectationTarget::InstanceMethods#to'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/expectation_target.rb:139:in 'RSpec::Expectations::BlockExpectationTarget#to'
     # ./spec/jobs/pvp/sync_character_batch_job_spec.rb:24:in 'block (2 levels) in <top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-rails-8.0.2/lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:649:in 'Array#map'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:121:in 'Array#map'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/exe/rspec:4:in '<top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/rspec:25:in 'Kernel#load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/rspec:25:in '<top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli/exec.rb:59:in 'Kernel.load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli/exec.rb:59:in 'Bundler::CLI::Exec#kernel_load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli/exec.rb:23:in 'Bundler::CLI::Exec#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli.rb:452:in 'Bundler::CLI#exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor/command.rb:28:in 'Bundler::Thor::Command#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor/invocation.rb:127:in 'Bundler::Thor::Invocation#invoke_command'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor.rb:538:in 'Bundler::Thor.dispatch'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli.rb:35:in 'Bundler::CLI.dispatch'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor/base.rb:584:in 'Bundler::Thor::Base::ClassMethods#start'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli.rb:29:in 'Bundler::CLI.start'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/exe/bundle:28:in 'block in <top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/friendly_errors.rb:117:in 'Bundler.with_friendly_errors'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/exe/bundle:20:in '<top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/bundle:25:in 'Kernel#load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/bundle:25:in '<main>'

  2) Pvp::SyncCharacterBatchJob with a single character enqueues one SyncCharacterJob
     Failure/Error:
       .to have_enqueued_job(Pvp::SyncCharacterJob)
       .exactly(1).time
       .with(character_id: character1.id, locale: locale)

     NoMethodError:
       undefined method 'time' for an instance of RSpec::Rails::Matchers::ActiveJob::HaveEnqueuedJob
     # ./spec/jobs/pvp/sync_character_batch_job_spec.rb:44:in 'block (3 levels) in <top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-rails-8.0.2/lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:649:in 'Array#map'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'Array#map'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:121:in 'Array#map'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/exe/rspec:4:in '<top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/rspec:25:in 'Kernel#load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/rspec:25:in '<top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli/exec.rb:59:in 'Kernel.load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli/exec.rb:59:in 'Bundler::CLI::Exec#kernel_load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli/exec.rb:23:in 'Bundler::CLI::Exec#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli.rb:452:in 'Bundler::CLI#exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor/command.rb:28:in 'Bundler::Thor::Command#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor/invocation.rb:127:in 'Bundler::Thor::Invocation#invoke_command'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor.rb:538:in 'Bundler::Thor.dispatch'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli.rb:35:in 'Bundler::CLI.dispatch'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor/base.rb:584:in 'Bundler::Thor::Base::ClassMethods#start'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli.rb:29:in 'Bundler::CLI.start'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/exe/bundle:28:in 'block in <top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/friendly_errors.rb:117:in 'Bundler.with_friendly_errors'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/exe/bundle:20:in '<top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/bundle:25:in 'Kernel#load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/bundle:25:in '<main>'

  3) Pvp::SyncCharacterJob when the service succeeds delegates all work to the service
     Failure/Error:
       expect(Pvp::Characters::SyncCharacterService).to have_received(:call).with(
         character: character,
         locale:    locale
       )

       #<Pvp::Characters::SyncCharacterService (class)> received :call with unexpected arguments
         expected: ({character: #<Character id: 5, avatar_url: nil, blizzard_id: 30174011, class_id: nil, class_slug: "de...m: "magtheridon", region: "tw", updated_at: "2025-12-20 05:42:12.582181000 +0000">, locale: "pt_BR"}) (options hash)
              got: ({character: #<Character id: 5, avatar_url: nil, blizzard_id: 30174011, class_id: nil, class_slug: "de...: "tw", updated_at: "2025-12-20 05:42:12.582181000 +0000">, locale: "pt_BR", processing_queues: nil}) (keyword arguments)
       Diff:
       @@ -1,3 +1,4 @@
        [{character:
           #<Character id: 5, avatar_url: nil, blizzard_id: 30174011, class_id: nil, class_slug: "death knight", created_at: "2025-12-20 05:42:12.582181000 +0000", faction: "horde", inset_url: nil, is_private: false, last_equipment_snapshot_at: nil, main_raw_url: nil, meta_synced_at: nil, name: "Brown", race: "kul tiran", race_id: nil, realm: "magtheridon", region: "tw", updated_at: "2025-12-20 05:42:12.582181000 +0000">,
       -  locale: "pt_BR"}]
       +  locale: "pt_BR",
       +  processing_queues: nil}]
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-support-3.13.6/lib/rspec/support.rb:110:in 'block in <module:Support>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-support-3.13.6/lib/rspec/support.rb:119:in 'RSpec::Support.notify_failure'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/fail_with.rb:35:in 'RSpec::Expectations.fail_with'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:39:in 'RSpec::Expectations::ExpectationHelper.handle_failure'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:55:in 'block in RSpec::Expectations::PositiveExpectationHandler.handle_matcher'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:26:in 'RSpec::Expectations::ExpectationHelper.with_matcher'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:47:in 'RSpec::Expectations::PositiveExpectationHandler.handle_matcher'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/expectation_target.rb:65:in 'RSpec::Expectations::ExpectationTarget::InstanceMethods#to'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/expectation_target.rb:101:in 'RSpec::Expectations::ValueExpectationTarget#to'
     # ./spec/jobs/pvp/sync_character_job_spec.rb:37:in 'block (3 levels) in <top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-rails-8.0.2/lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:649:in 'Array#map'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'Array#map'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:121:in 'Array#map'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/exe/rspec:4:in '<top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/rspec:25:in 'Kernel#load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/rspec:25:in '<top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli/exec.rb:59:in 'Kernel.load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli/exec.rb:59:in 'Bundler::CLI::Exec#kernel_load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli/exec.rb:23:in 'Bundler::CLI::Exec#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli.rb:452:in 'Bundler::CLI#exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor/command.rb:28:in 'Bundler::Thor::Command#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor/invocation.rb:127:in 'Bundler::Thor::Invocation#invoke_command'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor.rb:538:in 'Bundler::Thor.dispatch'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli.rb:35:in 'Bundler::CLI.dispatch'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor/base.rb:584:in 'Bundler::Thor::Base::ClassMethods#start'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli.rb:29:in 'Bundler::CLI.start'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/exe/bundle:28:in 'block in <top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/friendly_errors.rb:117:in 'Bundler.with_friendly_errors'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/exe/bundle:20:in '<top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/bundle:25:in 'Kernel#load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/bundle:25:in '<main>'

  4) Blizzard::Auth#initialize when client_id or client_secret is missing raises an ArgumentError
     Failure/Error:
       expect {
         described_class.new(client_id: nil, client_secret: nil)
       }.to raise_error(
              ArgumentError,
              "Blizzard client_id and client_secret must be provided"
            )

       expected ArgumentError with "Blizzard client_id and client_secret must be provided", got #<ArgumentError: Blizzard client_id and client_secret must be provided. Set Rails credentials (blizza...IZZARD_CLIENT_SECRET. If using credentials in a worker process, ensure RAILS_MASTER_KEY is present.> with backtrace:
         # ./app/services/blizzard/auth.rb:22:in 'Blizzard::Auth#initialize'
         # ./spec/services/blizzard/auth_spec.rb:18:in 'Class#new'
         # ./spec/services/blizzard/auth_spec.rb:18:in 'block (5 levels) in <top (required)>'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/matchers/built_in/raise_error.rb:63:in 'RSpec::Matchers::BuiltIn::RaiseError#matches?'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:50:in 'block in RSpec::Expectations::PositiveExpectationHandler.handle_matcher'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:26:in 'RSpec::Expectations::ExpectationHelper.with_matcher'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:47:in 'RSpec::Expectations::PositiveExpectationHandler.handle_matcher'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/expectation_target.rb:65:in 'RSpec::Expectations::ExpectationTarget::InstanceMethods#to'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/expectation_target.rb:139:in 'RSpec::Expectations::BlockExpectationTarget#to'
         # ./spec/services/blizzard/auth_spec.rb:19:in 'block (4 levels) in <top (required)>'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-rails-8.0.2/lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:649:in 'Array#map'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'Array#map'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'Array#map'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:121:in 'Array#map'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/exe/rspec:4:in '<top (required)>'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/rspec:25:in 'Kernel#load'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/rspec:25:in '<top (required)>'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli/exec.rb:59:in 'Kernel.load'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli/exec.rb:59:in 'Bundler::CLI::Exec#kernel_load'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli/exec.rb:23:in 'Bundler::CLI::Exec#run'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli.rb:452:in 'Bundler::CLI#exec'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor/command.rb:28:in 'Bundler::Thor::Command#run'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor/invocation.rb:127:in 'Bundler::Thor::Invocation#invoke_command'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor.rb:538:in 'Bundler::Thor.dispatch'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli.rb:35:in 'Bundler::CLI.dispatch'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor/base.rb:584:in 'Bundler::Thor::Base::ClassMethods#start'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli.rb:29:in 'Bundler::CLI.start'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/exe/bundle:28:in 'block in <top (required)>'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/friendly_errors.rb:117:in 'Bundler.with_friendly_errors'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/exe/bundle:20:in '<top (required)>'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/bundle:25:in 'Kernel#load'
         # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/bundle:25:in '<main>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-support-3.13.6/lib/rspec/support.rb:110:in 'block in <module:Support>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-support-3.13.6/lib/rspec/support.rb:119:in 'RSpec::Support.notify_failure'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/fail_with.rb:35:in 'RSpec::Expectations.fail_with'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:39:in 'RSpec::Expectations::ExpectationHelper.handle_failure'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:55:in 'block in RSpec::Expectations::PositiveExpectationHandler.handle_matcher'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:26:in 'RSpec::Expectations::ExpectationHelper.with_matcher'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:47:in 'RSpec::Expectations::PositiveExpectationHandler.handle_matcher'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/expectation_target.rb:65:in 'RSpec::Expectations::ExpectationTarget::InstanceMethods#to'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/expectation_target.rb:139:in 'RSpec::Expectations::BlockExpectationTarget#to'
     # ./spec/services/blizzard/auth_spec.rb:19:in 'block (4 levels) in <top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-rails-8.0.2/lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:649:in 'Array#map'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'Array#map'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'Array#map'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:121:in 'Array#map'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/exe/rspec:4:in '<top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/rspec:25:in 'Kernel#load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/rspec:25:in '<top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli/exec.rb:59:in 'Kernel.load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli/exec.rb:59:in 'Bundler::CLI::Exec#kernel_load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli/exec.rb:23:in 'Bundler::CLI::Exec#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli.rb:452:in 'Bundler::CLI#exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor/command.rb:28:in 'Bundler::Thor::Command#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor/invocation.rb:127:in 'Bundler::Thor::Invocation#invoke_command'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor.rb:538:in 'Bundler::Thor.dispatch'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli.rb:35:in 'Bundler::CLI.dispatch'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor/base.rb:584:in 'Bundler::Thor::Base::ClassMethods#start'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli.rb:29:in 'Bundler::CLI.start'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/exe/bundle:28:in 'block in <top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/friendly_errors.rb:117:in 'Bundler.with_friendly_errors'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/exe/bundle:20:in '<top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/bundle:25:in 'Kernel#load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/bundle:25:in '<main>'

  5) Pvp::Characters::SyncCharacterService#call when new data must be fetched enqueues processing jobs for each entry
     Failure/Error:
       expect { call_service }
         .to have_enqueued_job(Pvp::ProcessLeaderboardEntryJob).exactly(2).times

       expected to enqueue exactly 2 jobs, but enqueued 0
       Queued jobs:
         Pvp::ProcessLeaderboardEntryBatchJob job with [{entry_ids: [12, 13], locale: "en_US"}], on queue pvp_processing, with no priority specified
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-support-3.13.6/lib/rspec/support.rb:110:in 'block in <module:Support>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-support-3.13.6/lib/rspec/support.rb:119:in 'RSpec::Support.notify_failure'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/fail_with.rb:35:in 'RSpec::Expectations.fail_with'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:39:in 'RSpec::Expectations::ExpectationHelper.handle_failure'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:55:in 'block in RSpec::Expectations::PositiveExpectationHandler.handle_matcher'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:26:in 'RSpec::Expectations::ExpectationHelper.with_matcher'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:47:in 'RSpec::Expectations::PositiveExpectationHandler.handle_matcher'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/expectation_target.rb:65:in 'RSpec::Expectations::ExpectationTarget::InstanceMethods#to'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/expectation_target.rb:139:in 'RSpec::Expectations::BlockExpectationTarget#to'
     # ./spec/services/pvp/characters/sync_character_service_spec.rb:177:in 'block (4 levels) in <top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-rails-8.0.2/lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:649:in 'Array#map'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'Array#map'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'Array#map'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:121:in 'Array#map'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/exe/rspec:4:in '<top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/rspec:25:in 'Kernel#load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/rspec:25:in '<top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli/exec.rb:59:in 'Kernel.load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli/exec.rb:59:in 'Bundler::CLI::Exec#kernel_load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli/exec.rb:23:in 'Bundler::CLI::Exec#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli.rb:452:in 'Bundler::CLI#exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor/command.rb:28:in 'Bundler::Thor::Command#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor/invocation.rb:127:in 'Bundler::Thor::Invocation#invoke_command'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor.rb:538:in 'Bundler::Thor.dispatch'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli.rb:35:in 'Bundler::CLI.dispatch'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor/base.rb:584:in 'Bundler::Thor::Base::ClassMethods#start'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli.rb:29:in 'Bundler::CLI.start'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/exe/bundle:28:in 'block in <top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/friendly_errors.rb:117:in 'Bundler.with_friendly_errors'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/exe/bundle:20:in '<top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/bundle:25:in 'Kernel#load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/bundle:25:in '<main>'

  6) Pvp::Characters::SyncCharacterService#call when new data must be fetched assigns processing jobs to deterministic queues
     Failure/Error:
       expect(Pvp::ProcessLeaderboardEntryJob)
         .to have_been_enqueued
         .on_queue(Pvp::ProcessLeaderboardEntryJob.queue_for(entry_2v2.id))

       expected to enqueue exactly 1 jobs, on queue pvp_processing_c, but enqueued 0
       Queued jobs:
         Pvp::ProcessLeaderboardEntryBatchJob job with [{entry_ids: [14, 15], locale: "en_US"}], on queue pvp_processing, with no priority specified
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-support-3.13.6/lib/rspec/support.rb:110:in 'block in <module:Support>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-support-3.13.6/lib/rspec/support.rb:119:in 'RSpec::Support.notify_failure'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/fail_with.rb:35:in 'RSpec::Expectations.fail_with'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:39:in 'RSpec::Expectations::ExpectationHelper.handle_failure'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:55:in 'block in RSpec::Expectations::PositiveExpectationHandler.handle_matcher'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:26:in 'RSpec::Expectations::ExpectationHelper.with_matcher'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:47:in 'RSpec::Expectations::PositiveExpectationHandler.handle_matcher'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/expectation_target.rb:65:in 'RSpec::Expectations::ExpectationTarget::InstanceMethods#to'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/expectation_target.rb:101:in 'RSpec::Expectations::ValueExpectationTarget#to'
     # ./spec/services/pvp/characters/sync_character_service_spec.rb:184:in 'block (4 levels) in <top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-rails-8.0.2/lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:649:in 'Array#map'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'Array#map'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'Array#map'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:121:in 'Array#map'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/exe/rspec:4:in '<top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/rspec:25:in 'Kernel#load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/rspec:25:in '<top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli/exec.rb:59:in 'Kernel.load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli/exec.rb:59:in 'Bundler::CLI::Exec#kernel_load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli/exec.rb:23:in 'Bundler::CLI::Exec#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli.rb:452:in 'Bundler::CLI#exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor/command.rb:28:in 'Bundler::Thor::Command#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor/invocation.rb:127:in 'Bundler::Thor::Invocation#invoke_command'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor.rb:538:in 'Bundler::Thor.dispatch'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli.rb:35:in 'Bundler::CLI.dispatch'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor/base.rb:584:in 'Bundler::Thor::Base::ClassMethods#start'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli.rb:29:in 'Bundler::CLI.start'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/exe/bundle:28:in 'block in <top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/friendly_errors.rb:117:in 'Bundler.with_friendly_errors'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/exe/bundle:20:in '<top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/bundle:25:in 'Kernel#load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/bundle:25:in '<main>'

  7) Pvp::Entries::ProcessSpecializationService when everything goes well updates the character's class_slug (normalized) and class_id when class_slug is present
     Failure/Error:
       expect do
         result
         character.reload
       end.to change(character, :class_slug)
                .to("shaman")
                .and change(character, :class_id)
                       .to(class_id)

       expected `Character#class_slug` to have changed to "shaman", but did not change
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-support-3.13.6/lib/rspec/support.rb:110:in 'block in <module:Support>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-support-3.13.6/lib/rspec/support.rb:119:in 'RSpec::Support.notify_failure'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/fail_with.rb:35:in 'RSpec::Expectations.fail_with'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:39:in 'RSpec::Expectations::ExpectationHelper.handle_failure'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:55:in 'block in RSpec::Expectations::PositiveExpectationHandler.handle_matcher'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:26:in 'RSpec::Expectations::ExpectationHelper.with_matcher'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/handler.rb:47:in 'RSpec::Expectations::PositiveExpectationHandler.handle_matcher'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/expectation_target.rb:65:in 'RSpec::Expectations::ExpectationTarget::InstanceMethods#to'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-expectations-3.13.5/lib/rspec/expectations/expectation_target.rb:139:in 'RSpec::Expectations::BlockExpectationTarget#to'
     # ./spec/services/pvp/entries/process_specialization_service_spec.rb:112:in 'block (3 levels) in <top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:263:in 'BasicObject#instance_exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:263:in 'block in RSpec::Core::Example#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:511:in 'block in RSpec::Core::Example#with_around_and_singleton_context_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:468:in 'block in RSpec::Core::Example#with_around_example_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:486:in 'block in RSpec::Core::Hooks::HookCollections#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:626:in 'block in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-rails-8.0.2/lib/rspec/rails/adapters.rb:75:in 'block (2 levels) in <module:MinitestLifecycleAdapter>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:457:in 'BasicObject#instance_exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:457:in 'RSpec::Core::Example#instance_exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:390:in 'RSpec::Core::Hooks::AroundHook#execute_with'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:628:in 'block (2 levels) in RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:352:in 'RSpec::Core::Example::Procsy#call'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:629:in 'RSpec::Core::Hooks::HookCollections#run_around_example_hooks_for'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/hooks.rb:486:in 'RSpec::Core::Hooks::HookCollections#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:468:in 'RSpec::Core::Example#with_around_example_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:511:in 'RSpec::Core::Example#with_around_and_singleton_context_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example.rb:259:in 'RSpec::Core::Example#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:653:in 'block in RSpec::Core::ExampleGroup.run_examples'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:649:in 'Array#map'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:649:in 'RSpec::Core::ExampleGroup.run_examples'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:614:in 'RSpec::Core::ExampleGroup.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'block in RSpec::Core::ExampleGroup.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'Array#map'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/example_group.rb:615:in 'RSpec::Core::ExampleGroup.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:121:in 'block (3 levels) in RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:121:in 'Array#map'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:121:in 'block (2 levels) in RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/configuration.rb:2097:in 'RSpec::Core::Configuration#with_suite_hooks'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:116:in 'block in RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/reporter.rb:74:in 'RSpec::Core::Reporter#report'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:115:in 'RSpec::Core::Runner#run_specs'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:89:in 'RSpec::Core::Runner#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:71:in 'RSpec::Core::Runner.run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/lib/rspec/core/runner.rb:45:in 'RSpec::Core::Runner.invoke'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/rspec-core-3.13.6/exe/rspec:4:in '<top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/rspec:25:in 'Kernel#load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/rspec:25:in '<top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli/exec.rb:59:in 'Kernel.load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli/exec.rb:59:in 'Bundler::CLI::Exec#kernel_load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli/exec.rb:23:in 'Bundler::CLI::Exec#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli.rb:452:in 'Bundler::CLI#exec'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor/command.rb:28:in 'Bundler::Thor::Command#run'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor/invocation.rb:127:in 'Bundler::Thor::Invocation#invoke_command'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor.rb:538:in 'Bundler::Thor.dispatch'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli.rb:35:in 'Bundler::CLI.dispatch'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/vendor/thor/lib/thor/base.rb:584:in 'Bundler::Thor::Base::ClassMethods#start'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/cli.rb:29:in 'Bundler::CLI.start'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/exe/bundle:28:in 'block in <top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/lib/bundler/friendly_errors.rb:117:in 'Bundler.with_friendly_errors'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/lib/ruby/gems/3.4.0/gems/bundler-2.6.9/exe/bundle:20:in '<top (required)>'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/bundle:25:in 'Kernel#load'
     # /Users/alessandro/.asdf/installs/ruby/3.4.7/bin/bundle:25:in '<main>'

Finished in 0.62426 seconds (files took 1.16 seconds to load)
79 examples, 7 failures, 7 pending

Failed examples:

rspec ./spec/jobs/pvp/sync_character_batch_job_spec.rb:22 # Pvp::SyncCharacterBatchJob enqueues individual SyncCharacterJob for each character for parallel processing
rspec ./spec/jobs/pvp/sync_character_batch_job_spec.rb:41 # Pvp::SyncCharacterBatchJob with a single character enqueues one SyncCharacterJob
rspec ./spec/jobs/pvp/sync_character_job_spec.rb:34 # Pvp::SyncCharacterJob when the service succeeds delegates all work to the service
rspec ./spec/services/blizzard/auth_spec.rb:16 # Blizzard::Auth#initialize when client_id or client_secret is missing raises an ArgumentError
rspec ./spec/services/pvp/characters/sync_character_service_spec.rb:175 # Pvp::Characters::SyncCharacterService#call when new data must be fetched enqueues processing jobs for each entry
rspec ./spec/services/pvp/characters/sync_character_service_spec.rb:180 # Pvp::Characters::SyncCharacterService#call when new data must be fetched assigns processing jobs to deterministic queues
rspec ./spec/services/pvp/entries/process_specialization_service_spec.rb:108 # Pvp::Entries::ProcessSpecializationService when everything goes well updates the character's class_slug (normalized) and class_id when class_slug is present

Coverage report generated for RSpec to /Users/alessandro/Documents/Develop/personal/wow-bis/backend/coverage.
Line Coverage: 51.92% (541 / 1042)
